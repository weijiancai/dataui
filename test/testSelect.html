<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link href="../qunit/qunit.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="../lib/jquery-1.4.4.js"></script>
    <script type="text/javascript" src="../qunit/qunit.js"></script>
    <script type="text/javascript" src="../dataui/map.js"></script>
    <script type="text/javascript" src="../dataui/util.js"></script>
    <script type="text/javascript" src="../dataui/select.js"></script>
    <script type="text/javascript">
        test('init()', function() {
            var s0 = $S('S0');
            equals(s0.related, undefined);
            equals(s0.sortType, undefined);
            equals(s0.url, undefined);
            equals(s0.urlData, undefined);
            equals(s0.optionValue, undefined);
            equals(s0.optionText, undefined);
            equals(s0.subSelect, undefined);
            equals(s0.map.size(), 0);

            s0 = $S({
                id : 'S0',
                url : 'http://www.baidu.com',
                urlData : {search: 'zhangsan'},
                optionValue : 'codeId',
                optionText : 'codeDesc',
                sortType : SORT_TEXT
            });

            equals(s0.sortType, 2);
            equals(s0.url, 'http://www.baidu.com');
            same(s0.urlData, {search: 'zhangsan'});
            equals(s0.optionValue, 'codeId');
            equals(s0.optionText, 'codeDesc');

            var s1 = $S({
                id : 's1',
                related : 's2',
                sortType : SORT_VAL,
                url : 'http://www.google.com',
                urlData : {search: 'lisi'},
                optionValue : 'codeId',
                optionText : 'codeDesc'
            });
            equals(s1.related, 's2');
            equals(s1.sortType, 1);
            equals(s1.url, 'http://www.google.com');
            same(s1.urlData, {search: 'lisi'});
            equals(s1.optionValue, 'codeId');
            equals(s1.optionText, 'codeDesc');
        });

        test('length', function() {
            var select = $S('SmallFreightType');
            equals(select.length, 10);
        });

        test('values()', function() {
            var select = $S('SmallFreightType');
            equals(select.values(), '882,876,877,879,883,878,875,874,881,880');
        });

        test('texts()', function() {
            var select = $S('SmallFreightType');
            equals(select.texts(), '报纸、书籍、杂志等其他印刷品,木浆,其他木料、木粉,其他木制品、软木制品,其他纸制品,人造板材、胶合板、纤维板、木丝板、刨花板等木材加工品,软木,原木,纸、纸板,纸浆');
        });

        test('indexOfVal()', function() {
            var select = $S('SmallFreightType');
            equals(select.indexOfVal('882'), 0);
            equals(select.indexOfVal('878'), 5);
            equals(select.indexOfVal('880'), 9);
            equals(select.indexOfVal('88'), -1);
        });

        test('indexOfText()', function() {
            var select = $S('SmallFreightType');
            equals(select.indexOfText('报纸、书籍、杂志等其他印刷品'), 0);
            equals(select.indexOfText('人造板材、胶合板、纤维板、木丝板、刨花板等木材加工品'), 5);
            equals(select.indexOfText('纸浆'), 9);
            equals(select.indexOfText('废纸'), -1);
        });

        test('exists()', function() {
            var select = $S('SmallFreightType');
            equals(select.exists('876', '木浆'), true);
            equals(select.exists('878'), true);
            equals(select.exists(null, '原木'), true);
            equals(select.exists(null, '废纸'), false);
            equals(select.exists('88'), false);
        });

        test('selectedIndexs()', function() {
            var select = $S('SmallFreightType');
            equals(select.selectedIndexs(), '0');
            equals(select.selectedIndexs(2), '2');

            var mselect = $S('M_SmallFreightType');
            equals(mselect.selectedIndexs(), '1,6,7');
            equals(mselect.selectedIndexs(3), '1,3,6,7');
        });

        test('selectedValues()', function() {
            var select = $S('SmallFreightType');
            select.selectedIndexs(0);
            equals(select.selectedValues(), '882');
            select.selectedIndexs(2);
            equals(select.selectedValues(), '877');

            var mselect = $S('M_SmallFreightType');
            mselect.clearSelect();
            mselect.selectedIndexs([1,6,7]);
            equals(mselect.selectedValues(), '876,875,874');
        });

        test('selectedTexts()', function() {
            var select = $S('SmallFreightType');
            select.selectedIndexs(0);
            equals(select.selectedTexts(), '报纸、书籍、杂志等其他印刷品');
            select.selectedIndexs(2);
            equals(select.selectedTexts(), '其他木料、木粉');

            var mselect = $S('M_SmallFreightType');
            mselect.clearSelect();
            mselect.selectedIndexs([1,6,7]);
            equals(mselect.selectedTexts(), '木浆,软木,原木');
        });

        test('val()', function() {
            var select = $S('SmallFreightType');
            select.clearSelect();
            equals(select.val(), '882');
            select.val('877');
            equals(select.val(), '877');
            select.val(3);
            equals(select.val(), '879');

            var mselect = $S('M_SmallFreightType');
            mselect.clearSelect();
            mselect.selectedIndexs([1,6,7]);
            equals(mselect.val(), '876,875,874');

        });

        test('test()', function() {
            var select = $S('SmallFreightType');
            select.clearSelect();
            equals(select.text(), '报纸、书籍、杂志等其他印刷品');
            select.val('877');
            equals(select.text(), '其他木料、木粉');
            select.val(3);
            equals(select.text(), '其他木制品、软木制品');

            var mselect = $S('M_SmallFreightType');
            mselect.clearSelect();
            mselect.selectedIndexs([1,6,7]);
            equals(mselect.text(), '木浆,软木,原木');
        });

        test('empty()', function() {
            var select = $S('SmallFreightType');
            select.empty();
            equals(select.length, 0);
            equals(select.values(), '');
            equals(select.texts(), '');
        });

        test('append()', function() {
            var select = $S('SmallFreightType');
            select.append('882', '报纸、书籍、杂志等其他印刷品');
            equals(select.length, 1);
            select.append('876');
            equals(select.length, 2);
            select.append(null, '木浆');
            equals(select.length, 3);
            select.append('255', '废纸');
            equals(select.length, 4);
        });

        test('del()', function() {
            var select = $S('SmallFreightType');
            select.del(3);
            equals(select.length, 3);
            select.del(null, '木浆');
            equals(select.length, 2);
            select.del('876');
            equals(select.length, 1);
            select.del('882', '报纸、书籍、杂志等其他印刷品');
            equals(select.length, 0);
        });

        test('sort()', function() {
            var select = $S('S_SmallFreightType');
            equals(select.values(), '882,876,877,879,883,878,875,874,881,880');
            select.sort(SORT_VAL);
            equals(select.values(), '874,875,876,877,878,879,880,881,882,883');
            equals(select.texts(), '原木,软木,木浆,其他木料、木粉,人造板材、胶合板、纤维板、木丝板、刨花板等木材加工品,其他木制品、软木制品,纸浆,纸、纸板,报纸、书籍、杂志等其他印刷品,其他纸制品');
            select.sort(SORT_TEXT);
            equals(select.texts(), '报纸、书籍、杂志等其他印刷品,木浆,其他木料、木粉,其他木制品、软木制品,其他纸制品,人造板材、胶合板、纤维板、木丝板、刨花板等木材加工品,软木,原木,纸、纸板,纸浆');
        });

        test('load()', function() {
            var s01 =  $S('S01');
            var data = ['报纸','木浆','软木','原木','纸浆','人造板材'];
            s01.load(data);
            equals(s01.values(), '报纸,木浆,软木,原木,纸浆,人造板材');
            data = [{codeId:882,codeDesc:'报纸',buid:1},{codeId:876,codeDesc:'木浆',buid:2},{codeId:875,codeDesc:'软木',buid:3},{codeId:874,codeDesc:'原木',buid:4},{codeId:880,codeDesc:'纸浆',buid:5},{codeId:878,codeDesc:'人造板材',buid:6}];
            var s02 = $S({id:'S02',optionValue:'codeId',optionText:'codeDesc',isMount:true});
            s02.load(data);
            equals(s02.values(), '882,876,875,874,880,878');
            equals(s02.texts(), '报纸,木浆,软木,原木,纸浆,人造板材');

            s02.save('code');
            data = ["界","门","纲","目","科","属","种"];
            s02.load(data);
            equals(s02.values(), "界,门,纲,目,科,属,种");
            equals(s02.texts(), "界,门,纲,目,科,属,种");
            s02.save('category');
            equals(s02.map.size(), 2);
            equals(s02.map.keys().join(), 'code,category');
            s02.load('code');
            equals(s02.values(), '882,876,875,874,880,878');
            equals(s02.texts(), '报纸,木浆,软木,原木,纸浆,人造板材');
        });

        test('url', function() {
            var s5 = $S({
                id : 's5',
                url : 'category.json'
            });
            stop();
            setTimeout(function() {
                equals(s5.values(), "界,门,纲,目,科,属,种");
                equals(s5.texts(), "界,门,纲,目,科,属,种");
                start();
            },100);
        });

        test('onchange()', function() {
            var s6 = $S({
                id : 's6',
                related : 's7'
            });
            var s5 = $S({
                id : 's5',
                url : 'category.json',
                onChange : function(value) {
                    var url = '';
                    switch (value) {
                        case '界' :
                            url = 'jie.json';
                            break;
                        case '门' :
                            url = 'men.json';
                            break;
                        case '纲' :
                            url = 'gang.json';
                            break;
                        case '目' :
                            url = 'mu.json';
                            break;
                        case '科' :
                            url = 'ke.json';
                            break;
                        case '属' :
                            url = 'shu.json';
                            break;
                        case '种' :
                            url = 'zhong.json';
                            break;
                    }
                    $S({
                        id : 's6',
                        url : url
                    });
                },
                onSuccess : function (data) {
                    $S({
                        id : 's6',
                        url : 'jie.json'
                    });
                }
            });
            stop();
            setTimeout(function() {
                var s7 = $S('s7');
                equals(s7.map.keys().join(), '动物界');
                equals(s7.map.values().join(), 'jie.json');
                start();
            },100);
        });
    </script>
</head>
<body>
<h1 id="qunit-header">QUnit Test Suite</h1>
<h2 id="qunit-banner"></h2>
<div id="qunit-testrunner-toolbar"></div>
<h2 id="qunit-userAgent"></h2>
<ol id="qunit-tests"></ol>
<div id="qunit-fixture">test markup</div>

<div>
    <select id="S0"></select>
    <select id="S01"></select>
    <select id="S02"></select>

    <select style="width: 200px;" id="SmallFreightType">
        <option value="882">报纸、书籍、杂志等其他印刷品</option>
        <option value="876">木浆</option>
        <option value="877">其他木料、木粉</option>
        <option value="879">其他木制品、软木制品</option>
        <option value="883">其他纸制品</option>
        <option value="878">人造板材、胶合板、纤维板、木丝板、刨花板等木材加工品</option>
        <option value="875">软木</option>
        <option value="874">原木</option>
        <option value="881">纸、纸板</option>
        <option value="880">纸浆</option>
    </select>

    <select style="width: 200px;" id="M_SmallFreightType" multiple="multiple">
        <option value="882">报纸、书籍、杂志等其他印刷品</option>
        <option value="876" selected="selected">木浆</option>
        <option value="877">其他木料、木粉</option>
        <option value="879">其他木制品、软木制品</option>
        <option value="883">其他纸制品</option>
        <option value="878">人造板材、胶合板、纤维板、木丝板、刨花板等木材加工品</option>
        <option value="875" selected="selected">软木</option>
        <option value="874" selected="selected">原木</option>
        <option value="881">纸、纸板</option>
        <option value="880">纸浆</option>
    </select>

    <select style="width: 200px;" id="S_SmallFreightType">
        <option value="882">报纸、书籍、杂志等其他印刷品</option>
        <option value="876">木浆</option>
        <option value="877">其他木料、木粉</option>
        <option value="879">其他木制品、软木制品</option>
        <option value="883">其他纸制品</option>
        <option value="878">人造板材、胶合板、纤维板、木丝板、刨花板等木材加工品</option>
        <option value="875">软木</option>
        <option value="874">原木</option>
        <option value="881">纸、纸板</option>
        <option value="880">纸浆</option>
    </select>

    <select id="s1">
        <option>abc</option>
        <option>dfjie</option>
        <option>fjwi</option>
    </select>

    <select id="s2">
        <option>abc</option>
        <option>dfjie</option>
        <option>fjwi</option>
    </select>

    <select id="s3">
        <option>abc</option>
        <option>dfjie</option>
        <option>fjwi</option>
    </select>

    <select id="s4">
        <option>abc</option>
        <option>dfjie</option>
        <option>fjwi</option>
    </select>

    <select id="s5"></select>
    <select id="s6" size="6" style="width:100px"></select>
    <select id="s7" size="6" style="width:100px">
        <option value="动物界">动物界</option>
        <option value="哺乳纲">哺乳纲</option>
    </select>
</div>

<div>
    <select style="width: 200px;" id="Left" size="11" multiple="multiple">
        <option value="882">报纸、书籍、杂志等其他印刷品</option>
        <option value="876">木浆</option>
        <option value="877">其他木料、木粉</option>
        <option value="879">其他木制品、软木制品</option>
        <option value="883">其他纸制品</option>
        <option value="878">人造板材、胶合板、纤维板、木丝板、刨花板等木材加工品</option>
        <option value="875">软木</option>
        <option value="874">原木</option>
        <option value="881">纸、纸板</option>
        <option value="880">纸浆</option>
    </select>

    <select style="width: 200px;" id="Right" size="11" multiple="multiple">

    </select>
    <input type="button" value=">" onclick="leftToRight('Left', 'Right', SORT_TEXT)">
    <input type="button" value="<" onclick="rightToLeft('Right', 'Left', SORT_TEXT)">
    <input type="button" value=">>" onclick="allToRight('Left', 'Right', SORT_TEXT)">
    <input type="button" value="<<" onclick="allToLeft('Right', 'Left', SORT_TEXT)">

</div>

<script type="text/javascript">

    $S({id:'Left',related:'Right'});
    /*
    $S('s6', {
        url : 'category1.json',
        optionValue : 'id',
        optionText : 'name',
        sort : SORT_TEXT
    });
    var category = ["界","门","纲","目","科","属","种"];
    document.write(category.join() + '<br/>');
    category.sort(function(a, b) {
        return a.localeCompare(b);
    });
    document.write(category.join() + '<br/>');*/

</script>
</body>
</html>